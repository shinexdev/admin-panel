<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Ads Match</title>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap");

        :root {
            --color-text-primary: #ffffff;
            --color-bg-primary: #000C47;
            --color-bg-secondary: #f3f5f9;
            --color-bg-overlay: rgba(2, 2, 2, 0.7);
        }

        body {
            font-family: "Inter", sans-serif;
            line-height: 1.5;
            color: var(--color-text-primary);
            background-color: var(--color-bg-secondary);
            margin: 0;
        }

        .header {
            text-align: center;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .main {
            width: 100%;
            position: relative;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .mdaily {
            background-image: url('src/mmfotdailyimg.png');
            padding-top: 177.78%;
            background-repeat: no-repeat;
        }

        .mfb {
            background-image: url('src/mmfotcomz.png');
            height: 0;
            padding-top: 100%;
        }

        .card-container {
            position: absolute;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
        }
        .cfb {
            top: 47%;
        }

        .cdaily {
            top: 54%;
        }
        .team-cards {
            font-size: 18px;
            margin-bottom: 10px;
            background: var(--color-bg-overlay);
            border-radius: 8px;
            font-weight: 600;
            text-align: center; /* Centering the text */
        }
        .live {
            width: 100px;
            font-size: 18px;
            line-height: 1;
            padding: 4px 15px;
            background-color: #ff5353;
            border-radius: 8px;
            color: white;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            margin: 0px 10px 4px;
        }
        .live-cus {
            font-weight: 600;
            padding-bottom: 5px;
        }
        .vs {
            font-size: 18px;
            line-height: 1;
            padding: 4px 15px;
            background-color: #D97706;
            border-radius: 8px;
            color: white;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            margin: 0px 10px 4px;
        }
        .team-names {
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-align: center;
            margin-bottom: 0px;
        }
        .team-home {
            flex: 1;
            text-align: right;
            margin-bottom: 5px;
        }
        .team-away {
            flex: 1;
            text-align: left;
            margin-bottom: 5px;
        }
        .vs-cus {
            font-weight: 600;
            padding-bottom: 5px;
        }
        .league-name {
            font-size: 11px;
            position: relative;
            text-align: center;
        }
        .id-number {
            position: absolute;
            font-size: 6px;
            color: #a9a9a9;
            padding: 0px 3px;
        }
        .league-text {
            display: inline-block;
        }
        .team-logo {
            width: 40px; /* Adjust the size as needed */
            height: 40px; /* Maintain aspect ratio */ /* Space between image and team name */
            vertical-align: middle; /* Align image with text */
        }

        .show-all-match{
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        .show-all-match .match {
            position: relative;
            width: 100px;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            background: var(--color-bg-overlay);
        }

        .show-all-match .team img {
            width: 30px; /* Larger team logos */
            height: 30px;
        }

        .show-all-match .match-details {
            font-size: 10px;
            font-weight: 700;
            text-align: center;
            color: var(--color-text-primary);
        }
        .show-all-match .match-content {
            padding: 5px;
        }

        .header input {
            padding: 10px;
            font-size: 16px;
            width: 300px;
        }

        .header button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: var(--color-bg-primary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .header button:hover {
            background-color: var(--color-bg-overlay);
        }

        .match {
            position: relative;
            width: 200px;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            background: var(--color-bg-overlay);
        }

        .match:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .match-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 15px;
        }

        .team img {
            width: 60px;
            height: 60px;
        }

        .match-details {
            font-size: 18px;
            font-weight: 700;
            text-align: center;
            color: var(--color-text-primary);
        }

        /* Special styles when only one match is present */
        .card-container.single-match .match {
            width: 400px; /* Adjust the size for single match */
            height: auto;
        }

        .card-container.single-match .team img {
            width: 120px; /* Larger team logos */
            height: 120px;
        }

        .card-container.single-match .match-details {
            font-size: 24px; /* Larger "VS" text */
            font-weight: bold;
            color: var(--color-text-primary);
        }
        /* Special styles when multi match is present */
        .card-container.multi-match .match {
            width: 270px; /* Adjust the size for single match */
            height: auto;
        }

        .card-container.multi-match .team img {
            width: 90px; /* Larger team logos */
            height: 90px;
        }

        .card-container.multi-match .match-details {
            font-size: 22px; /* Larger "VS" text */
            font-weight: bold;
            color: var(--color-text-primary);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
<div id="dialog" title="Box"></div>
<div class="header">
    <input type="text" id="scriptInput" placeholder="Enter Match Data as JSON" />
    <button onclick="loadData()">Submit</button>
</div>

<div class="show-all-match" id="show-all-match">
    <?php
    if (isset($_GET['data'])) {
        $data = $_GET['data'];
        $cards = json_decode($data, true);
        foreach ($cards as $card) {
            $home_img_base64 = base64_encode(file_get_contents($card['home_img']));
            $away_img_base64 = base64_encode(file_get_contents($card['away_img']));

            echo '<div class="match" data-league="' . $card['league'] . '" data-home="' . $card['home_name'] . '" data-away="' . $card['away_name'] . '" data-date="' . $card['date'] . '" data-time="' . $card['time'] . '">
                        <div class="match-content">
                            <input type="checkbox" class="match-checkbox" data-home="' . $card['home_name'] . '" data-away="' . $card['away_name'] . '" data-home-img="' . $home_img_base64 . '" data-away-img="' . $away_img_base64 . '" data-date="' . $card['date'] . '" data-time="' . $card['time'] . '" />
                            <div class="team team--home">
                                <img src="' . $card['home_img'] . '" />
                            </div>
                            <div class="match-details">VS</div>
                            <div class="team team--away">
                                <img src="' . $card['away_img'] . '" />
                            </div>
                        </div>
                    </div>';
        }
    }
    ?>
</div>
<div class="header">
    <button onclick="showSelectedMatches()">Show Selected Matches</button>
    <button onclick="clearSelectedMatches()">Clear Selected</button>
    <button id="getCardNameButton">Get Card Name</button>
</div>
<div class="header">
    <button id="btn1">Daily</button>
    <button id="btn2">FB</button>
</div>

<div class="main mdaily" id="main" onclick="downImage()">
    <div class="card-container cdaily" id="cardContainer">
        <?php
        /*        if (isset($_GET['data'])) {
                    $data = $_GET['data'];
                    $cards = json_decode($data, true);

                    foreach ($cards as $card) {
                        $home_img_base64 = base64_encode(file_get_contents($card['home_img']));
                        $away_img_base64 = base64_encode(file_get_contents($card['away_img']));

                        echo '<div class="match">
                                <div class="match-content">
                                    <div class="team team--home">
                                        <img src="data:image/png;base64,' . $home_img_base64 . '" alt="' . $card['home_name'] . '" />
                                    </div>
                                    <div class="match-details">VS</div>
                                    <div class="team team--away">
                                        <img src="data:image/png;base64,' . $away_img_base64 . '" alt="' . $card['away_name'] . '" />
                                    </div>
                                </div>
                            </div>';
                    }
                }
                */?>
    </div>
</div>

<script>
    document.getElementById('getCardNameButton').addEventListener('click', function () {
        // Get all the match cards from the card container
        const cardContainer = document.getElementById('show-all-match');
        const cards = cardContainer.querySelectorAll('.match'); // Select all match divs

        // Initialize an empty array to hold card data
        var nameMatches = '';

        // Loop through the cards and get their data
        cards.forEach(card => {

            const league = card.getAttribute("data-league");
            const home = card.getAttribute("data-home");
            const away = card.getAttribute("data-away");
            const date = card.getAttribute("data-date");
            const time = card.getAttribute("data-time");
            nameMatches +=
                `ðŸ†${league}\n` +
                `â°${date} (${time})\n` +
                `${home} ðŸ†š ${away}\n`
            ;
        });

        console.log(`${nameMatches}`);
    });
    function showSelectedMatches() {
        const selectedMatches = [];
        const checkboxes = document.querySelectorAll('.match-checkbox:checked');

        checkboxes.forEach(checkbox => {
            const home = checkbox.getAttribute('data-home');
            const away = checkbox.getAttribute('data-away');
            const homeImg = checkbox.getAttribute('data-home-img');
            const awayImg = checkbox.getAttribute('data-away-img');
            const date = checkbox.getAttribute('data-date');
            const time = checkbox.getAttribute('data-time');
            selectedMatches.push({ home, away, homeImg, awayImg, date, time });
        });

        // Update the cardContainer with selected matches
        const cardContainer = document.getElementById('cardContainer');
        cardContainer.innerHTML = ''; // Clear previous content

        selectedMatches.forEach(match => {
            const matchDiv = document.createElement('div');
            matchDiv.classList.add('team-cards');
            const time = en2mmNumber(match.time);
            matchDiv.innerHTML = `
                <div class="team-names">
                <div class="team-home">
                    ${match.home} <img src="data:image/png;base64,${match.homeImg}" alt="${match.home}" class="team-logo lazy-yard cbg"> <!-- Home team image -->
                </div>
                <div class="vs">
                    <div class="vs-cus">${match.date}</div>
                    <div class="vs-cus">${time}</div>
                </div>
                <div class="team-away">
                    <img src="data:image/png;base64,${match.awayImg}" alt="${match.away}" class="team-logo lazy-yard cbg"> ${match.away}
                </div>
            </div>
        `;
            cardContainer.appendChild(matchDiv);
        });

        // Apply CSS classes based on the number of selected matches
        // cardContainer.classList.remove('single-match', 'multi-match'); // Clear previous classes
        // if (selectedMatches.length <= 2) {
        //     cardContainer.classList.add('single-match');
        // } else if (selectedMatches.length <= 4) {
        //     cardContainer.classList.add('multi-match');
        // }
    }

    document.addEventListener("DOMContentLoaded", function () {
        // Ensure initial styles are applied correctly
        showSelectedMatches();
    });
    function loadData() {
        const dataAdd = document.getElementById('scriptInput').value;
        const regex = /<script>var match_data = (.*?);<\/script>/s;
        const match = regex.exec(dataAdd);
        if (match && match[1]) {
            try {
                window.location.href = '?data=' + encodeURIComponent(match[1]);
                // cardData = JSON.parse(match[1]);
                // renderCards();
            } catch (e) {
                console.error("Invalid JSON data:", e);
            }
        } else {
            console.error("Load: No matching script data found!");
        }
    }

    // Example usage:
    //const result = en2mmNumber('12345 PM');
    //console.log(result);  // Output: áá‚áƒá„á…á€Š
    function downImage(){
        const element = document.getElementById('main');
        const d = new Date().toISOString().slice(0, 19).replace(/-/g, "");
        html2canvas(element, {
            scale: 2,
            useCORS: true,
            allowTaint : true,
            logging: true, letterRendering: 1
        }).then(function (canvas) {
            canvas.toBlob(function (blob) {
                const link = document.createElement('a');
                link.download = '0-'+d+'.jpg';
                link.href = URL.createObjectURL(blob);
                link.click();
            }, 'image/jpeg', 1.0);
        }).catch(function (error) {
            console.error('Error generating image:', error);
        });
    }
    function en2mmNumber(content) {
        if (content.startsWith('0')) {
            content = content.substring(1); // Remove the starting "0"
        }
        const en = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'PM', 'AM'];
        const my = ['á€', 'á', 'á‚', 'áƒ', 'á„', 'á…', 'á†', 'á‡', 'áˆ', 'á‰', 'á€Š', 'á€™á€”á€€á€º'];

        en.forEach((item, index) => {
            const regex = new RegExp(item, 'g');
            content = content.replace(regex, my[index]);
        });

        return content;
    }
    document.addEventListener('DOMContentLoaded', () => {
        function changeBackground(mClass, cClass) {
            const mainElement = document.getElementById('main');
            const cardElement = document.getElementById('cardContainer');
            if (mainElement && cardElement) {
                mainElement.className = `main ${mClass}`;
                cardElement.className = `card-container ${cClass}`;
            } else {
                console.error('Element with id "main" not found.');
            }
        }

        document.getElementById('btn1').addEventListener('click', () => changeBackground('mdaily','cdaily'));
        document.getElementById('btn2').addEventListener('click', () => changeBackground('mfb','cfb'));
    });
    function clearSelectedMatches() {
        // Uncheck all checkboxes
        const checkboxes = document.querySelectorAll('.match-checkbox');
        checkboxes.forEach(checkbox => checkbox.checked = false);

        // Clear the selected matches
        const cardContainer = document.getElementById('cardContainer');
        cardContainer.innerHTML = ''; // Clear the card container
    }
</script>
</body>
</html>

